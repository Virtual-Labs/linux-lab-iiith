<!-- This file needs to be edited by the lab developer to suit
the requirements of their lab in particular.-->

<!-- Add class="default" to include any element as it is
specified in default.html. 
Do not include class="default" to the elements that you want to
edit -->

<!DOCTYPE html>
<html>
<head></head>
<body>

<div id="experiment"> <!-- The Experiment Document Container-->

<!-- The lab Header contains the logo and the name of the lab,
	usually displayed on the top of the page-->

	<header id="experiment-header" >

	<div id="experiment-header-logo" class="logo">
	<!-- Enclose the logo image of your lab or write it in 
	text-->
	<img src="../images/logo.jpg" />
	</div>

	<div id="experiment-header-heading" class="heading">
	<!-- Write the name of your lab and link it to the home 
	page of your lab (h1 tag is preferred while writing your 
			lab name)-->
	<a href="../index.html">Systems and Software Virtual Lab</a>	
	</div>

	<!-- Add any additional element you want to add to the lab 
	header, For example : Help (Enclosing them with suitable 
			div is recommended)-->

	</header>


	<!-- The lab article is the main content area where all the 
	experiment content sits-->
	<article id="experiment-article">

	<!-- The lab article has an header, optional navigational 
	menu, number of sections, an optional sidebar and a closing 
	footer-->

	<header id="experiment-article-heading" class="heading">
	<!-- You can add a welcome message or title of the 
	experiment here -->
	GPG Encryption
	<!-- Add any additional element if required with proper 
	enclosing-->
	</header>

	<!-- Navigation menu is useful to organize the view of 
	multiple sections inside the article-->
	<nav id="experiment-article-navigation" class="default">
	<ul id="experiment-article-navigation-menu">
	<!-- The menu can be dynamically generated to contain 
	the headings of your sections or instead write the 
	menu items of your choice individually enclosedu in 
	<li> tag as shown below-->
	</ul>
	</nav>

	<!-- All the sections of your lab or experiment can be 
	enclosed together with a div element as shown below-->
	<div id="experiment-article-sections">

	<!-- First section of the article-->
	<section id="experiment-article-section-1">

	<div id="experiment-article-section-1-icon" 
	class="icon">
	<!-- Enclose the icon image of your lab -->
	<img src="../images/introduction.jpg" />
	</div>	

	<!-- The heading for the section can be enclosed in a 
	div tag. -->
	<div id="experiment-article-section-1-heading" 
	class="heading">
	Introduction
	</div>
	<!-- Write the section content inside a paragraph 
	element, You can also include images with <img> tag -->
	<div id="experiment-article-section-1-content" 
	class="content">	
	<p>
	Welcome to GPG key encryption, the tenth experiment of the Systems and
	Software lab.  This experiment teaches you how to create, send
	and read secure encrypted documents.
	</p>

<p> The experimental platform for this experiment is a command line
 interface which mimics the terminal of a Linux machine. The command
 line interface supports a few basic commands to enable the user to
 learn file management basics. The experiment contains the command
 line interface and an instructor section (in green background) below
 it. The instructor section guides the user to perform the experiment
 which is a series of tasks.

	</p><p> Proceed to the theory section to get an overview of
	the commands. Then move to the experiment section to get some
	hands-on experience and finish the experiment tasks. After you
	are done with the experiment, go to the quiz section to test
	your understanding.
	 
	</p>

	</div>


	</section>

	<!-- Second section of the article-->
	<section id="experiment-article-section-2">

	<div id="experiment-article-section-2-icon" 
	class="icon">
	<!-- Enclose the icon image of your lab. -->
	<img src="../images/theory.jpg" />
	</div>

	<!-- The heading for the section can be enclosed in a 
	div tag. -->
	<div id="experiment-article-section-2-heading" 
	class="heading">
	Theory
	</div>


	<!-- Write the section content inside a paragraph 
	element, we can also include images with <img> tag -->
	<div id="experiment-article-section-2-content" 
	class="content">
	<p><font size="4">What is GPG?</font></p>
	<p>GPG stands for GNU Public Guard, an FOSS application that
is built on top of the OpenPGP standards. It is used to:

- creating keypairs,
- communicate securely between systems, 
- encrypt and decrypt documents and
- authenticating the originality of documents.

Since GPG uses public-key cryptography, the first step is to create a
public-private keypair.  A private keypair is always kept secret and
is never shared.  On the other hand, a public key is distributed to
concerned systems/personnel for secure communication.

</p>

<font size="4">1. How to create keys?</font>
<p>
You can create a public key by typing in the terminal:
gpg --gen-key

You can use the default options, but you can also create keys only for
signing, as you may require only to encrypt documents; but not decrypt
any.  Otherwise, just go ahead and choose the default option.
<pre class="code">
 gpg --gen-key
gpg (GnuPG) 1.4.11; Copyright (C) 2010 Free Software Foundation, Inc.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Please select what kind of key you want:
   (1) RSA and RSA (default)
   (2) DSA and Elgamal
   (3) DSA (sign only)
   (4) RSA (sign only)
Your selection? 1
</pre>

Select a key-size. It is important to notice that longer the keysize,
the more difficult it is to crack the security; but also more time is
spent in encrypting or decrypting a document.
<pre class= "code">
RSA keys may be between 1024 and 4096 bits long.
What keysize do you want? (2048) 1024
Requested keysize is 1024 bits
</pre>
Sometimes, you might want to de-activate your keys after a certain
period of time; for example, you might want to renew your keys on a
yearly basis for your e-mail server.  So, people who use to encrypt
e-mails/documents will be automatically made aware when they try to
use your expired public key.  However, the normal trend is to keep a
set of keys forever.
<pre class="code">
Please specify how long the key should be valid.
         0 = key does not expire
      <n>  = key expires in n days
      <n>w = key expires in n weeks
      <n>m = key expires in n months
      <n>y = key expires in n years
Key is valid for? (0) 3
Key expires at Sat 12 Nov 2011 10:26:38 AM IST
Is this correct? (y/N) y
</pre>

It is also useful to map a key to the owner's name and e-mail ID: for example, if I
created a key, I should be able to identify the key as my own, and
hence, I am asked to provide my name and e-mail ID.  Please be careful
with the name as it cannot be altered after a key is created. 
<pre class="code">

You need a user ID to identify your key; the software constructs the user ID
from the Real Name, Comment and Email Address in this form:
    "Heinrich Heine (Der Dichter) <heinrichh@duesseldorf.de>"

Real name: John Doe
Email address: johndoe@virtual-labs.ac.in
Comment: John Doe's GPG key created at Virtual Labs
You selected this USER-ID:
    "John Doe (John Doe's GPG key created at Virtual Labs) <johndoe@virtual-labs.ac.in>"

Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? O
</pre>

The computer may now ask for some entropy. Please type in some random
keystrokes for the system to gather randomness. 
<pre class="code">
We need to generate a lot of random bytes. It is a good idea to perform
some other action (type on the keyboard, move the mouse, utilize the
disks) during the prime generation; this gives the random number
generator a better chance to gain enough entropy.

Not enough random bytes available.  Please do some other work to give
the OS a chance to collect more entropy! (Need 284 more bytes)
...+++++
.......+++++
We need to generate a lot of random bytes. It is a good idea to perform
some other action (type on the keyboard, move the mouse, utilize the
disks) during the prime generation; this gives the random number
generator a better chance to gain enough entropy.
...+++++
+++++
gpg: key ADE3016E marked as ultimately trusted
public and secret key created and signed.

gpg: checking the trustdb
gpg: 3 marginal(s) needed, 1 complete(s) needed, PGP trust model
gpg: depth: 0  valid:   2  signed:   0  trust: 0-, 0q, 0n, 0m, 0f, 2u
gpg: next trustdb check due at 2011-11-12
pub   1024R/ADE3016E 2011-11-09 [expires: 2011-11-12]
      Key fingerprint = 0851 EA2C A6EE D28D E700  2438 E48E C215 ADE3 016E
uid                  John Doe (John Doe's GPG key created at Virtual Labs) <johndoe@virtual-labs.ac.in>
sub   1024R/BCA28A65 2011-11-09 [expires: 2011-11-12]
</pre>
It is highly imperative that nobody uses your key; hence before the
private key is used for any purpose, it needs to be 'unlocked' using a
passphrase, which should be known only to you.  


At any point of time, you can see your gpg keys by typing gpg
--list-keys.  This will show any GPG keys that you have created.
<pre class="code">
[johndoe@test ~/exp10]$ gpg --list-keys
/home/johndoe/.gnupg/pubring.gpg
------------------------------
pub   1024R/ADE3016E 2011-11-09 [expires: 2011-11-12]
uid                  John Doe (John Doe's GPG key created at Virtual Labs) <johndoe@virtual-labs.ac.in>
sub   1024R/BCA28A65 2011-11-09 [expires: 2011-11-12]
</pre>

The way to use GPG keys is to use the public key of a person to
encrypt a document.  An encrypted document can only be decrypted with a
private key.  Hence, you should always share your public key with
others, but keep your private key with you.


<u>Generating a public key from a private key</u>
If you wish to share your public key with anyone, you must export if
first into a transferable format.

The way to export a public key is by typing the following command:
<pre class="code">
gpg --export <part of key name, email or comments>
--output <public-key-name-which-you-want-to-give>
</pre>

Therefore, for our key for John Doe can be exported by issuing the command:

<pre class="code">
gpg --export johndoe --output johndoe-public-key
</pre>

The output is a binary file with the name johndoe-public-key.

However, users might also wish to send the keys in a text format
rather than a binary file. Hence, by encoding the key from binary to
text (encoding binary data to printable ASCII characters), the keys
can then be sent via e-mail or put up in user's websites.

The command to do it is :
<pre class="code">
gpg --armor --export <part of key name, email or comments>    
</pre>

The output is a set of human-readable ASCII characters.

For the GPG key that we generated for John Doe, we can generate the
ASCII-armored format of the public key by typing:

<pre class="code">
$ gpg --armor --export  johndoe
-----BEGIN PGP PUBLIC KEY BLOCK-----
Version: GnuPG v1.4.11 (GNU/Linux)

mI0ETroIQgEEALiqAffrwF9D3s79UrjWpFjTvC/yhsjafbxdixMguYT4Uenflux5
TnTgQn5BS7PJAqqb+XHdzhYS7OsfdmrTHx8oRiemMN9Pw74RPvf3rCS8NMt8jfdo
QiI+ydZ+XZCq4bKqEQjR9bpeWbv9fV9XqufluSpyR7lgc/0LmcJgP5p9ABEBAAG0
UkpvaG4gRG9lIChKb2huIERvZSdzIEdQRyBrZXkgY3JlYXRlZCBhdCBWaXJ0dWFs
IExhYnMpIDxqb2huZG9lQHZpcnR1YWwtbGFicy5hYy5pbj6IvgQTAQIAKAUCTroI
QgIbAwUJAAP0gAYLCQgHAwIGFQgCCQoLBBYCAwECHgECF4AACgkQ5I7CFa3jAW7p
LwP+M+n7q/0JHjBeBbGu0RxUxpuLVtNyxpv2P22DrHIvyJA4lDwUogHYRp6slJkh
JOYiuRMKRfZKu8OLbD/HIx/5zrD9dr8UcQcml+R375EdSybO9PeXiqVANcLihE2H
rb6ZwG8caX1zQtjcSg5qHvNUiJRDUwz9qeGXCyFfFysi69a4jQROughCAQQAufyr
Dy4w33zuPqTB/ChK+4yLlXi3o9cqzmepNEdrJZFIZvXMVdbw9n5qBb0DPAHoVxsq
k+PXvpHtFBgbcmd/olmb6p7R7FwhlYbJFsroKeceQAPosKjcD8aS7vu6x8/RE0GJ
Vk3CF/LbzZsbbfQm7CEzjvJUsCqXY6XTrWRNpHEAEQEAAYilBBgBAgAPBQJOughC
AhsMBQkAA/SAAAoJEOSOwhWt4wFufpkD/jy8lx5C7a6dfummnS8J/QNfYomT/6JE
mKb6laCTezfvrXDB01t7aH4s9S9tOnRXoK6NG6qyHr//n36kZwRd6l0dFRC9SrNN
WNOL39Zl+zdar87VfTMl4G6OIj3YUA/eVOvwq2rc77R/3tLyMwWOwIKJFvsZdXoT
zGvv4hQj26s1
=QDl5
-----END PGP PUBLIC KEY BLOCK-----
</pre>

</p>

<u>How to encrypt a file using gpg</u>

You are now ready to encrypt the file you want to send to johndoe by
encrypting with johndoe's public key.

The command for doing this is:
<pre class="code">
gpg --output encrypted-file.gpg --encrypt --recipient blake@cyb.org original-document.
</pre>


<u>How to decrypt a file using gpg</u>
You can decrypt any file that has been encrypted using your public
key.
<pre class="code">
gpg --output original-document --decrypt encrypted-file.gpg
</pre>

You will be asked to provide the passphrase of the private key to
unlock. Please provide the passphrase to unlock the file.


	</div>
      </section>

      <section id="experiment-article-section-4">

        <div id="experiment-article-section-4-icon" 
        class="icon">
	  <!-- Enclose the icon image of your lab.-->
	  <img src="../images/simulation.jpg" />
	  </div>

	  <div id="experiment-article-section-4-heading" 
	  class="heading">
EXPERIMENT
	    </div>

	  <div id="experiment-article-section-4-content" 
	  class="content">
	  <p>
	  <div id="login">If you already have Virtual Labs login
	  credentials, please click 
<A HREF="javascript:void(0)"
onclick="window.open('interaction-frame.html',
'welcome','width=screen.availWidth,height=screen.availHeight,status=yes')">
here</A>.<br />
In case you do not have login credentials, please click here.
	  </div>

	  <div id="signup">

	  <div id="signup-warning"></div>

	  <form action="javascript:signupattempt(document.getElementById('signupform'));" id="signupform">

	  <table><tr>

	  <td>Your name</td><td> <input type="text" name="yourname"
	  value="" id="yourname"/></td></tr>

	  <td>Preferred username</td><td> <input type="text"
	  name="preferredusername" value=""
	  id="preferredusername"/></td></tr>

	  <tr><td>Password</td> <td><input type="password"
	  name="preferredpassword" id="preferredpassword"/></td></tr>

	  <tr><td>Re-enter Password</td> <td><input type="password"
	  name="repreferredpassword"
	  id="repreferredpassword"/></td></tr>

	  <tr><td>Email</td> <td><input type="text" name="email" id="email"/></td></tr>

	  <tr><td>Re-enter Email</td> <td><input type="text" name="reemail" id="reemail"/></td></tr>

	  <tr></tr>

	  <tr><td colspan=2>Enter the black characters present in the below image</td></tr>

	  <tr><td><img src="php/captcha.php"
	  id="captchaimg"/></td><td><input type="text" name="captcha"
	  id="captcha"/></td></tr>

	  <tr><td></td><td><input type="submit" value="Sign up" /></td></tr>

	  </table>

	  </form>

	  </div>

	  <div id="logout">

	  <a href="#" onclick="logout();">Logout</a>
	  </div>

	  <pre id="terminal" class="code"><div id="input"
	  class="inpcls"><form name='f' class='cmdform' action=''
	  onsubmit="return false;"
	  id="cmdformid"><table class="inputtable"
	  id="inputtableid"><tr><td><div id='prompt'
	  class='less'>user@pascal:~/$</div></td><td class="inputtd"><input id='inputfield'
	  name='q' type='text' class='cmdline' autocomplete="off"
	  value="" onkeypress="showHint(event,this.value)"
	  /></td></tr></table></form><div id="output"
	  class="outcls"></div></div></pre>

<pre class="instr" id="instr">

<div id="instruction" title="0">

Now that we have learned how to tweak BASH look and environment variables, we
have a set of exercises for you.

The shell above supports few basic shell commands. Play along to get
some hands-on experience of the interface.

When you are ready to perform the exercise, which is a set of 5 tasks,
enter the command "start".

</div>

try: start,next,prev,clear,logout.

</pre>




          </p>
        </div>

      </section>

        <section id="experiment-article-section-6">
      
          <div id="experiment-article-section-6-icon" 
          class="icon">
	    <!-- Enclose the icon image of your lab.-->
	    <img src="../images/quizzes.jpg" />
	  </div>

          <div id="experiment-article-section-6-heading" 
          class="heading">
            Quiz
          </div>

          <div id="experiment-article-section-6-content" 
          class="content">
<ol>
<li>How to you verify signed files?</li>
<li>How do you export multiple keys at the same time?</li>
</ol>
          </div>

        </section>

        <section id="experiment-article-section-8">
   
          <div id="experiment-article-section-8-icon" 
          class="icon">
	    <!-- Enclose the icon image of your lab.-->
	    <img src="../images/readings.jpg" />
	  </div>

          <div id="experiment-article-section-8-heading" 
          class="heading">
            Further Readings
          </div>

          <div id="experiment-article-section-8-content" 
          class="content">
<ol>
<li><a href="http://www.gnupg.org/gph/en/manual/book1.html">http://www.gnupg.org/gph/en/manual/book1.html</a> </li>
<li><a href="http://www.madboa.com/geek/gpg-quickstart/">http://www.madboa.com/geek/gpg-quickstart/</a></li>
<li><a href="http://en.wikipedia.org/wiki/GNU_Privacy_Guard">http://en.wikipedia.org/wiki/GNU_Privacy_Guard</a></li>
<li><a href="http://www.spywarewarrior.com/uiuc/gpg/gpg-com-4.htm">http://www.spywarewarrior.com/uiuc/gpg/gpg-com-4.htm</a></li>
<li><a href="http://www.gnupg.org/documentation/manpage.en.html">http://www.gnupg.org/documentation/manpage.en.html</a></li>
</ol>
     </div>

        </section>

    <section id="experiment-article-section-9">

          <div id="experiment-article-section-9-icon" 
          class="icon">
            <!-- Enclose the icon image of your lab.-->
            <img src="../images/readings.jpg" />
          </div>

          <div id="experiment-article-section-9-heading" 
          class="heading">
	
	Feedback
          </div>

          <div id="experiment-article-section-9-content" 
          class="content">
	Please provide us feedback <a href="http://virtual-labs.ac.in/feedback/" >here</a>
          </div>

        </section>


      </div>


    <!-- An article can have a sidebar that contain related 
    links and additional material (however it is kept optional 
    at this moment) -->
    <aside id="lab-article-sidebar" class="default">
      <!-- put the content that you want to appear in the 
      sidebar -->	
    </aside>


    <!-- Article footer can display related content and 
    additional links -->						
    <footer id="lab-article-footer" class="default">
      <!-- Put the content that you want to appear here -->
    </footer>

  </article>


  <!-- Links to other labs, about us page can be kept the lab 
  footer-->
   <footer id="lab-footer" class="footer">
    <!-- Put the content here-->
	<a href="http://virtual-labs.ac.in/nmeict/" >Sponsered by MHRD (NME-ICT) </a> | <a href="http://virtual-labs.ac.in/licensing/" target="_blank"> Licensing Terms </a>
  </footer>

</div>		

</body>
</html>
