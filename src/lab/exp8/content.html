<!-- This file needs to be edited by the lab developer to suit
the requirements of their lab in particular.-->

<!-- Add class="default" to include any element as it is
specified in default.html. 
Do not include class="default" to the elements that you want to
edit -->

<!DOCTYPE html>
<html>
<head></head>
<body>

<div id="experiment"> <!-- The Experiment Document Container-->

<!-- The lab Header contains the logo and the name of the lab,
	usually displayed on the top of the page-->

	<header id="experiment-header" >

	<div id="experiment-header-logo" class="logo">
	<!-- Enclose the logo image of your lab or write it in 
	text-->
	<img src="../images/logo.jpg" />
	</div>

	<div id="experiment-header-heading" class="heading">
	<!-- Write the name of your lab and link it to the home 
	page of your lab (h1 tag is preferred while writing your 
			lab name)-->
	<a href="../index.html">Systems and Software Virtual Lab</a>	
	</div>

	<!-- Add any additional element you want to add to the lab 
	header, For example : Help (Enclosing them with suitable 
			div is recommended)-->

	</header>


	<!-- The lab article is the main content area where all the 
	experiment content sits-->
	<article id="experiment-article">

	<!-- The lab article has an header, optional navigational 
	menu, number of sections, an optional sidebar and a closing 
	footer-->

	<header id="experiment-article-heading" class="heading">
	<!-- You can add a welcome message or title of the 
	experiment here -->
	BASH and environment variables
	<!-- Add any additional element if required with proper 
	enclosing-->
	</header>

	<!-- Navigation menu is useful to organize the view of 
	multiple sections inside the article-->
	<nav id="experiment-article-navigation" class="default">
	<ul id="experiment-article-navigation-menu">
	<!-- The menu can be dynamically generated to contain 
	the headings of your sections or instead write the 
	menu items of your choice individually enclosedu in 
	<li> tag as shown below-->
	</ul>
	</nav>

	<!-- All the sections of your lab or experiment can be 
	enclosed together with a div element as shown below-->
	<div id="experiment-article-sections">

	<!-- First section of the article-->
	<section id="experiment-article-section-1">

	<div id="experiment-article-section-1-icon" 
	class="icon">
	<!-- Enclose the icon image of your lab -->
	<img src="../images/introduction.jpg" />
	</div>	

	<!-- The heading for the section can be enclosed in a 
	div tag. -->
	<div id="experiment-article-section-1-heading" 
	class="heading">
	Introduction
	</div>
	<!-- Write the section content inside a paragraph 
	element, You can also include images with <img> tag -->
	<div id="experiment-article-section-1-content" 
	class="content">	
	<p>
	Welcome to BASH(Bourne Again Shell) and environment variables,
	the eighth experiment of the Systems and Software lab.  This
	experiment consists of tweaking around with environment
	variables that are essential to ease the task of using BASH on
	a daily basis. The theory section provides a brief overview of
	the syntax required to tweak BASH.
	</p>

<p> The experimental platform for this experiment is a command line
 interface which mimics the terminal of a Linux machine. The command
 line interface supports a few basic commands to enable the user to
 learn BASH shell basics. There are a series of tasks which need to be performed in each experiment.
	</p><p> Proceed to the theory section to get an overview of
	the commands. Then move to the experiment section to get some
	hands-on experience and finish the experiment tasks. After you
	are done with the experiment, go to the quiz section to test
	your understanding.
	 
	</p>

	</div>


	</section>

	<!-- Second section of the article-->
	<section id="experiment-article-section-2">

	<div id="experiment-article-section-2-icon" 
	class="icon">
	<!-- Enclose the icon image of your lab. -->
	<img src="../images/theory.jpg" />
	</div>

	<!-- The heading for the section can be enclosed in a 
	div tag. -->
	<div id="experiment-article-section-2-heading" 
	class="heading">
	Theory
	</div>


	<!-- Write the section content inside a paragraph 
	element, we can also include images with <img> tag -->
	<div id="experiment-article-section-2-content" 
	class="content">
	<p>What is BASH?</p>
	<p>BASH stands for Bourne Again Shell, a command-line
interface to most *nix systems, and is possibly the most widely used
of all shells.  BASH was built by incorporating features from ksh(Korn
SHELL) and csh(C shell).</p>
<p>
<font size="4">1. BASH configuration</font>

Normally, BASH properties can be altered by modifying the contents of
three files, which are usually present in the ~ folder of your system:
<br />
- .bashrc <br />
- .bash_profile<br />
- .bash_logout<br />

The .bash_profile file contains the commands that are to be executed
every time you log in to your system. The .bashrc file is the most
commonly used file for making user-specific BASH settings.  The
.bash_logout contains the set of commands that should be executed when
an user logs out of the system.

In this experiment, we will try out some of the features of using BASH
by modifying the .bashrc file.

The complete set of BASH variables can be seen by opening a shell
prompt and typing env. (For Ubuntu users, the standard method to
launch a shell is to type Alt-F2 and then type gnome-terminal).
</p>
<pre class="code">
johndoe@JukeBox:~ $ vi .bashrc

johndoe@JukeBox:~ $
</pre>
A typical .bashrc is empty.  However, it may contain several lines
written in it.

The first thing that you should do before editing .bashrc is to create
a backup of the original file. In order to do it, 
type

<pre class="code"> cp ~/.bashrc ~/.bashrc.bak</pre>. 

Your original BASH configuration is now backed up
in <pre class="code">~/.bashrc.bak</pre>. You can always restore it by
typing
<pre class="code">cp ~/.bashrc.bak ~/.bashrc</pre>

If you have made any changes to .bashrc and want them to be loaded
immediately (otherwise you'll have to wait till next reboot), type in
terminal:

<pre class="code">source .bashrc</pre>


<font size="3">Set vi mode in BASH</font>

Since a lot of users make use of vi, or Visual, a pretty popular
editor used in *nix systems, BASH can be set to run using vi shortcuts
as well. <br />

The easiest way to try it out is to open up shell, and type:
<pre class="code">set -o vi</pre>. <br />

BASH will then run in the Edit mode of vi. To use the command mode,
just hit Escape.  To go back to the Edit mode, press a or i. <br />

Similarly, if you are an Emacs user, you can also enable Emacs
shortcuts in BASH.  To do this, type in shell:

<pre class="code"> set -o emacs</pre>. You
can now use Emacs shortcuts in BASH.

In order to make this permanent, you need to save the command in .bashrc.

<br />


 The .bash_history file contains a history of the commands that were
typed in BASH. In order to set the number of commands to be displayed
if you type history in terminal, you can set HISTSIZE="number" in your
.bashrc. The default value is set to 500.

<font size="3">Customizing the prompt in BASH</font>
<u>How to set colors</u>

Open your .bashrc, and write colors as specified below.
tput is the command that sets the terminal output, setaf is the color
for foreground, setab is for background color.  A set of sample color
configurations are provided below:
<br />
Black="$(tput setaf 0)" <br />
BlackBG="$(tput setab 0)" <br />
DarkGrey="$(tput bold ; tput setaf 0)" <br />
LightGrey="$(tput setaf 7)" <br />
LightGreyBG="$(tput setab 7)" <br />
White="$(tput bold ; tput setaf 7)" <br />
Red="$(tput setaf 1)" <br />
RedBG="$(tput setab 1)" <br />
LightRed="$(tput bold ; tput setaf 1)" <br />
Green="$(tput setaf 2)" <br />
GreenBG="$(tput setab 2)" <br />
LightGreen="$(tput bold ; tput setaf 2)" <br />
Brown="$(tput setaf 3)" <br />
BrownBG="$(tput setab 3)" <br />
Yellow="$(tput bold ; tput setaf 3)" <br />
Blue="$(tput setaf 4)" <br />
BlueBG="$(tput setab 4)" <br />
LightBlue="$(tput bold ; tput setaf 4)" <br />
Purple="$(tput setaf 5)" <br />
PurpleBG="$(tput setab 5)" <br />
Pink="$(tput bold ; tput setaf 5)" <br />
Cyan="$(tput setaf 6)" <br />
CyanBG="$(tput setab 6)" <br />
LightCyan="$(tput bold ; tput setaf 6)" <br />
NC="$(tput sgr0)" # No Color <br /> <br />

 <br />
<u>How to display static content after launching a shell</u>
You might want to display a message as soon as your shell session
starts. <br />

A sample .bashrc entry which displays hostname, date, kernel
information, system uptime, processor details and number of processors
are:
<pre class="code">
echo -ne "${Red}Hostname:${Cyan}\t\t";hostname; <br />
echo -ne "${Red}Date:${Cyan}\t\t\t"; date; <br />
echo -ne "${Red}Kernel Information: \t${Cyan}"; uname -ms;<br />
echo -ne "${Red}Uptime(HH:MM):${Cyan}\t\t"; <br />
uptime| awk '{print $3}' | sed  's/,//g';<br />
echo -ne "${Red}Processor: ${Cyan}\t\t"; uname -p;<br />
echo -ne "${Red}Number of Processors:${Cyan}\t";<br />
cat /proc/cpuinfo | grep processor | wc -l; <br />
</pre>
 <br /> <br />
<u>How to edit the prompt</u>
PS1 is the variable in bashrc that is read for primary prompt. 

<pre class="code">PS1='[\[$Black\]\u@\h \[$Red\]\w \[$Black\]$]'</pre>

This will create a prompt which looks like:
<pre class="code">[johndoe@localhost ~]$ </pre>.
 <br /> <br />
<u>Aliases</u>
Sometimes, you need to type in a long command quite frequently.  The
way to avoid it is by 'alias'ing the command to a name. <br />

For example, if you need to type a command very frequently:<br/>
<pre class="code">rsync /home/johndoe/data/foo/foo.org
  /home/janedoe/work/project/bar/</pre><br />

Instead of typing this command every time you need it, or searching it in bash
history, you can alias a command to a name.<br />

<pre class="code">alias <alias-name>="command"</pre><br />

Therefore to set an alias the rsync command to a
  name copy-foo, we type:<br />

<pre class="code">alias copy-foo="rsync /home/johndoe/data/foo/foo.org
  /home/janedoe/work/project/bar/"</pre> <br />

You can now type copy-foo in the terminal instead of the command and
still get the same result.<br />

In order to make this alias permanent (use it even after logging
out/reboots), you can save the alias command in your .bashrc
file. <br />

In order to delete a certain alias, type unalias <alias-name>.<br />

If you have saved the alias in your .bashrc, you will first have to
remove the entry from .bashrc and then run the unalias command.<br />

 <br /> <br /> <br />
<font size="4">2. Environment Variables</font>
The complete set of environment variables can be found by typing env
in shell.

<pre class="code">

johndoe@JukeBox:~ $ env

XDG_DATA_HOME=/home/johndoe/.local/share
DESKTOP_STARTUP_ID=openbox/urxvt/31572-0-JukeBox_TIME4731266
TERM=xterm
SHELL=/bin/bash
XDG_SESSION_COOKIE=e57a92db1fb514f3e4bb4e4300000454-1320300541.493683-1881147140
WINDOWID=16777223
USER=johndoe
MOZ_PLUGIN_PATH=/usr/lib/mozilla/plugins
XDG_CONFIG_DIRS=/etc/xdg
PATH=/usr/local/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin:/usr/bin/vendor_perl:/usr/bin/core_perl
MAIL=/var/mail/johndoe
PWD=/home/johndoe
JAVA_HOME=/usr/lib/jvm/java-7-openjdk/jre
LANG=en_US.UTF-8
COLORFGBG=default;default
HOME=/home/johndoe
SHLVL=1
TERMINFO=/usr/share/terminfo
XDG_CONFIG_HOME=/home/johndoe/.config
XDG_CACHE_HOME=/home/johndoe/.cache
LOGNAME=johndoe
XDG_DATA_DIRS=/usr/share/:/usr/local/share/
DBUS_SESSION_BUS_ADDRESS=unix:abstract=/tmp/dbus-bSw58vikAL,guid=90fb9ea02a6e1a08b6814d0000001255
DISPLAY=:0.0
J2REDIR=/usr/lib/jvm/java-7-openjdk/jre
G_BROKEN_FILENAMES=1
COLORTERM=rxvt-xpm
XAUTHORITY=/home/johndoe/.Xauthority
_=/usr/bin/env
</pre>

In the example above, we had created an user named johndoe
earlier. This is the sample output of environment variables of the
user johndoe.

The variables that are of particular interest are: <br />
- SHELL=/bin/bash, indicating that the default shell for the user
johndoe is BASH. <br />

-
<pre class="code">PATH=/usr/local/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin:/usr/bin/vendor_perl:/usr/bin/core_perl</pre>

<br/>
Whenever a command is executed in the shell prompt from any path,
shell looks inside the above-mentioned directories to find executables
that have the same name as the command. For example, if you wish to
launch Firefox from the shell, type firefox and hit Enter. BASH will
look for executables named firefox in the above-mentioned
directories. It will find the executable in /usr/bin and execute
it. You can also add your own executables to /usr/local/bin and try
executing them.

If you wish to edit an environment variable, you should open a shell
and type<br />
<pre class="code">
export "variable name"="new_value".  </pre>

The environment variable is now updated with the new value.
However, you might also wish to append content to an existing
variable. <br />

The method for doing that is:<br />
<pre class="code">
export "variable_name"=$"variable_name":"new_value".  
</pre>
Environment variables are generated dynamically by shell scripts
stored in /etc/profile. 

	</div>
      </section>

      <section id="experiment-article-section-4">

        <div id="experiment-article-section-4-icon" 
        class="icon">
	  <!-- Enclose the icon image of your lab.-->
	  <img src="../images/simulation.jpg" />
	  </div>

	  <div id="experiment-article-section-4-heading" 
	  class="heading">
	  EXPERIMENT
	  </div>

	  <div id="experiment-article-section-4-content" 
	  class="content">
	  <p>
	  <div id="login">
 <br />If you already have Virtual Labs login
	  credentials, please click 
<A HREF="javascript:void(0)"
onclick="window.open('../php/login-form.php?expid=8',
'welcome','width=screen.availWidth,height=screen.availHeight,status=yes')">
here</A>.<br />
In case you do not have login credentials, please click here.
	  </div>

	  <div id="signup">

	  <div id="signup-warning"></div>

	  <form action="javascript:signupattempt(document.getElementById('signupform'));" id="signupform">

	  <table><tr>

	  <td>Your name</td><td> <input type="text" name="yourname"
	  value="" id="yourname"/></td></tr>

	  <td>Preferred username</td><td> <input type="text"
	  name="preferredusername" value=""
	  id="preferredusername"/></td></tr>

	  <tr><td>Password</td> <td><input type="password"
	  name="preferredpassword" id="preferredpassword"/></td></tr>

	  <tr><td>Re-enter Password</td> <td><input type="password"
	  name="repreferredpassword"
	  id="repreferredpassword"/></td></tr>

	  <tr><td>Email</td> <td><input type="text" name="email" id="email"/></td></tr>

	  <tr><td>Re-enter Email</td> <td><input type="text" name="reemail" id="reemail"/></td></tr>

	  <tr></tr>

	  <tr><td colspan=2>Enter the black characters present in the below image</td></tr>

	  <tr><td><img src="php/captcha.php"
	  id="captchaimg"/></td><td><input type="text" name="captcha"
	  id="captcha"/></td></tr>

	  <tr><td></td><td><input type="submit" value="Sign up" /></td></tr>

	  </table>

	  </form>

	  </div>

	  <div id="logout">

	  <a href="#" onclick="logout();">Logout</a>
	  </div>

	  <pre id="terminal" class="code"><div id="input"
	  class="inpcls"><form name='f' class='cmdform' action=''
	  onsubmit="return false;"
	  id="cmdformid"><table class="inputtable"
	  id="inputtableid"><tr><td><div id='prompt'
	  class='less'>user@pascal:~/$</div></td><td class="inputtd"><input id='inputfield'
	  name='q' type='text' class='cmdline' autocomplete="off"
	  value="" onkeypress="showHint(event,this.value)"
	  /></td></tr></table></form><div id="output"
	  class="outcls"></div></div></pre>

<pre class="instr" id="instr">

<div id="instruction" title="0">

Now that we have learned how to tweak BASH look and environment variables, we
have a set of exercises for you.

The shell above supports few basic shell commands. Play along to get
some hands-on experience of the interface.

When you are ready to perform the exercise, which is a set of tasks,
enter the command "start".

</div>

try: start,next,prev,clear,logout.

</pre>




          </p>
        </div>

      </section>

        <section id="experiment-article-section-6">
      
          <div id="experiment-article-section-6-icon" 
          class="icon">
	    <!-- Enclose the icon image of your lab.-->
	    <img src="../images/quizzes.jpg" />
	  </div>

          <div id="experiment-article-section-6-heading" 
          class="heading">
            Quiz
          </div>

          <div id="experiment-article-section-6-content" 
          class="content">
<ol>
<li>How do you change the default shell for an user?</li>
<li>How do you modify an alias?</li>
<li>How do you  determine the location of a script?</li>
<li>How do to set an alias to execute when you log out of a session? </li>
</ol>
          </div>

        </section>

        <section id="experiment-article-section-8">
   
          <div id="experiment-article-section-8-icon" 
          class="icon">
	    <!-- Enclose the icon image of your lab.-->
	    <img src="../images/readings.jpg" />
	  </div>

          <div id="experiment-article-section-8-heading" 
          class="heading">
            Further Readings
          </div>

          <div id="experiment-article-section-8-content" 
          class="content">
	<ol>
	<li><a href="http://www.cyberciti.biz/faq/bash-shell-change-the-color-of-my-shell-prompt-under-linux-or-unix/">http://www.cyberciti.biz/faq/bash-shell-change-the-color-of-my-shell-prompt-under-linux-or-unix/</a></li>
<li><a href="http://pubs.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap08.html">http://www.cyberciti.biz/faq/bash-shell-change-the-color-of-my-shell-prompt-under-linux-or-unix/</a></li>
</ol>
          </div>

        </section>

    <section id="experiment-article-section-9">

          <div id="experiment-article-section-9-icon" 
          class="icon">
            <!-- Enclose the icon image of your lab.-->
            <img src="../images/readings.jpg" />
          </div>

          <div id="experiment-article-section-9-heading" 
          class="heading">
	
	Feedback
          </div>

          <div id="experiment-article-section-9-content" 
          class="content">
	Please provide us feedback <a href="http://virtual-labs.ac.in/feedback/" >here</a>
          </div>

        </section>


      </div>


    <!-- An article can have a sidebar that contain related 
    links and additional material (however it is kept optional 
    at this moment) -->
    <aside id="lab-article-sidebar" class="default">
      <!-- put the content that you want to appear in the 
      sidebar -->	
    </aside>


    <!-- Article footer can display related content and 
    additional links -->						
    <footer id="lab-article-footer" class="default">
      <!-- Put the content that you want to appear here -->
    </footer>

  </article>


  <!-- Links to other labs, about us page can be kept the lab 
  footer-->
  <footer id="lab-footer" class="footer">
    <!-- Put the content here-->
	<a href="http://virtual-labs.ac.in/nmeict/" >Sponsered by MHRD (NME-ICT) </a> | <a href="http://virtual-labs.ac.in/licensing/" target="_blank"> Licensing Terms </a>
  </footer>

</div>		

</body>
</html>
