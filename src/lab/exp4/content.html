<!-- This file needs to be edited by the lab developer to suit
the requirements of their lab in particular.-->

<!-- Add class="default" to include any element as it is
specified in default.html. 
Do not include class="default" to the elements that you want to
edit -->

<!DOCTYPE html>
<html>
<head></head>
<body>

<div id="experiment"> <!-- The Experiment Document Container-->

<!-- The lab Header contains the logo and the name of the lab,
	usually displayed on the top of the page-->

	<header id="experiment-header" >

	<div id="experiment-header-logo" class="logo">
	<!-- Enclose the logo image of your lab or write it in 
	text-->
	<img src="../images/logo.jpg" />
	</div>

	<div id="experiment-header-heading" class="heading">
	<!-- Write the name of your lab and link it to the home 
	page of your lab (h1 tag is preferred while writing your 
			lab name)-->
	<a href="../index.html">Systems and Software Virtual Lab</a>	
	</div>

	<!-- Add any additional element you want to add to the lab 
	header, For example : Help (Enclosing them with suitable 
			div is recommended)-->

	</header>


	<!-- The lab article is the main content area where all the 
	experiment content sits-->
	<article id="experiment-article">

	<!-- The lab article has an header, optional navigational 
	menu, number of sections, an optional sidebar and a closing 
	footer-->

	<header id="experiment-article-heading" class="heading">
	<!-- You can add a welcome message or title of the 
	experiment here -->
	Version Control using Subversion
	<!-- Add any additional element if required with proper 
	enclosing-->
	</header>

	<!-- Navigation menu is useful to organize the view of 
	multiple sections inside the article-->
	<nav id="experiment-article-navigation" class="default">
	<ul id="experiment-article-navigation-menu">
	<!-- The menu can be dynamically generated to contain 
	the headings of your sections or instead write the 
	menu items of your choice individually enclosedu in 
	<li> tag as shown below-->
	</ul>
	</nav>

	<!-- All the sections of your lab or experiment can be 
	enclosed together with a div element as shown below-->
	<div id="experiment-article-sections">

	<!-- First section of the article-->
	<section id="experiment-article-section-1">

	<div id="experiment-article-section-1-icon" 
	class="icon">
	<!-- Enclose the icon image of your lab -->
	<img src="../images/introduction.jpg" />
	</div>	

	<!-- The heading for the section can be enclosed in a 
	div tag. -->
	<div id="experiment-article-section-1-heading" 
	class="heading">
	Introduction
	</div>
	<!-- Write the section content inside a paragraph 
	element, You can also include images with <img> tag -->
	<div id="experiment-article-section-1-content" 
	class="content">	
	<p>
	Welcome to the 'Version Control using Subversion' experiment.  This experiment will give you an understanding of Version control and how to achieve it using a version control system called subversion on Linux.
	</p><p>

 The experimental platform for this experiment is a command line interface which mimics the terminal of a linux machine. The command line interface supports a few basic commands to enable the user to learn file management basics. The experiment contains the command line interface and an instructor section (in green background) below it. The instructor section guides the user to peform the experiment which is a series of tasks.
	</p><p>
	Proceed to the theory section to get an overview of the commands. Then move to the experiment section to get some hands-on experience and finish the experiment tasks. After you are done with the experiment, go to the quiz section to test your understanding.
	 
	</p>

	</div>


	</section>

	<!-- Second section of the article-->
	<section id="experiment-article-section-2">

	<div id="experiment-article-section-2-icon" 
	class="icon">
	<!-- Enclose the icon image of your lab. -->
	<img src="../images/theory.jpg" />
	</div>

	<!-- The heading for the section can be enclosed in a 
	div tag. -->
	<div id="experiment-article-section-2-heading" 
	class="heading">
	Theory
	</div>


	<!-- Write the section content inside a paragraph 
	element, we can also include images with <img> tag -->
	<div id="experiment-article-section-2-content" 
	class="content">
	<h3>
	Version Control System
	</h3>
	<p>
	Software and Document Engineering involves writing code and documentation. All the code and documentation is spreads across many files and folders. It is common that many number of people work on the same set of files. This is how codes and documentation evolve. It is also required that versions are maintained.
	</p>
	<p>
	A Version Control System is an engineering solution for the above context. A master copy of the content (code/documentation) is to be created at a central location called repository. Each editor/author checks out a working copy on his local machine. Authors commit the changes made. Each commit is considered as a version. Each time, the authors get an updated version of the content from the repository to work on it.
	</p>
	<h3>
	Subversion
	</h3>
	<p>
	Subversion is a version control system that is widely used by many Open Source projects such as Apache and GCC. Subversion started as a project to implement features missing in CVS. Some of these features are:
	<ul>
	<li>Subversion tracks structure of folders. CVS doesn't have the concept of folders.</li>
	<li>Subversion has a global revision number for the whole repository. CVS tracks each file individually. A commit that represents one logical change to the project code may change a group of files; in Subversion, this commit will have one revision number instead of separate revision numbers for every changed file in CVS.</li>
	<li>Subversion commits are atomic.</li>
	<li>Subversion retains the revision history of moved or copied files.</li>
	</ul>
	</p>
	<h3>
	Creating a repository
	</h3>
	<p>
	To create a repository, change the current directory to where you want to create it, and run <code>"svnadmin create"</code> followed by the repository name. The syntax is : <code>svnadmin create &ltreponame&gt</code>
	</p>
	<p>
	The repository created is a new one and doesn't have any content in it i.e. it is empty.
	</p>
	<p>
	For example, let's create a repository by name myrepo in the home directory. A folder by the same name is created. Let's examine the contents of the folder.
	</p>
	<p>
	<pre class="code">
	johnodoe@johndoe-laptop:~/Documents$ cd
	johnodoe@johndoe-laptop:~/$ svnadmin create myrepo
	johndoe@johndoe-laptop:~$ ls myrepo
	README.txt  conf  db  format  hooks  locks
	johndoe@johndoe-laptop:~$ 
	</pre>
	</p>
	<h3>
	Checking out a repository
	</h3>
	<p>
	In order to work on the content (files,folders) stored in a repo, one should have a copy of the data stored at the repo locally on his/her system. To check out the contents of a repository onto your system, the following command is to be used: 
	<code>svn co &ltpath to repo&gt &ltdirname&gt</code>
	</p>
	<p>
	Continuing the example, assume the user stores his content in ~/Documents folder. To start adding content to the newly created repo, the repo needs to be checked out. The command used below will check out the repo into myrepo folder.
	</p>
	<p>
	<pre class="code">
	johnodoe@johndoe-laptop:~/$ cd Documents
	johnodoe@johndoe-laptop:~/Documents$ svn co file:///home/johndoe/myrepo myrepo
	Checked out revision 0.
	johnodoe@johndoe-laptop:~/Documents$ ls myrepo
	johnodoe@johndoe-laptop:~/Documents$ 
	</pre>
	</p>
	<h3>
	Adding content to the repository
	</h3>
	<p>
	When a local working copy is edited on the user system by adding files or folders SVN should be notified about it. In order to to so, the svn add command needs to be used:
	<code>svn add &ltfilename/foldername&gt</code>
	</p>
	<p>
	Lets add files to the local working copy checked out earlier. We then notify it to SVN by using <code>svn add</code>
	</p>
	<pre class="code">
	johnodoe@johndoe-laptop:~/Documents$ cd myrepo
	johnodoe@johndoe-laptop:~/Documents/myrepo$ touch first_file
	johnodoe@johndoe-laptop:~/Documents/myrepo$ echo "This is my first file" > first_file
	johnodoe@johndoe-laptop:~/Documents/myrepo$ svn add first_file
	A         first_file
	johnodoe@johndoe-laptop:~/Documents/myrepo$ mkdir first_dir
	johnodoe@johndoe-laptop:~/Documents/myrepo$ svn add first_dir
	A         first_dir
	johnodoe@johndoe-laptop:~/Documents/myrepo$ ls
	first_dir   first_file
	johnodoe@johndoe-laptop:~/Documents/myrepo$ 
	</pre>
	<h3>
	Commiting the data to a repository
	</h3>
	<p>
	When a local working copy needs to be committed to the repository so that the changes get reflected in the repo also, the <code>svn commit</code> command needs to be used:
	
	<code>svn commit -m "some log message to indicate the status of the contents"</code>
	</p>
	<p>
	Now, lets commit the data we added to the working copy to the repository.
	</p>
	<p>
	<pre class="code">
	johnodoe@johndoe-laptop:~/Documents/myrepo$ ls
	first_dir   first_file
	johnodoe@johndoe-laptop:~/Documents/myrepo$ svn commit -m " After I created the first file and directory "
	Adding         first_dir
	Adding         first_file
	Transmitting file data .
	Committed revision 1.
	</pre>
	</p>
	<h3>
	Updating the local copy
	</h3>
	<p>
	When the contents of the repo is modified by another user and a user doesn't have the latest version, he doesn't have to check out the repo entirely again. The local copy can be updated by using the command svn update. If the the local copy needs to be reverted to a previous version the command to be used is <code>svn update -r &ltrevision-number&gt</code>. An svn update without mentioning the version will update the copy to the latest version.
	</p>
	<p>
	<pre class="code">
	johnodoe@johndoe-laptop:~/Documents/myrepo$ svn update -r 0
	D    first_dir
	D    first_file
	Updated to revision 0.
	johnodoe@johndoe-laptop:~/Documents/myrepo$ ls
	johnodoe@johndoe-laptop:~/Documents/myrepo$ svn update
	A    first_dir
	A    first_file
	Updated to revision 1.
	johnodoe@johndoe-laptop:~/Documents/myrepo$ ls
	first_dir  first_file
	</pre>
	</p>
	<h3>
Comparing different revisions
</h3>
<p>
	<code>svn compare</code> command in the following form to compare two revisions of a file:
 
		<code>svn diff -r &ltrevision-1&gt &ltrevision-2&gt &ltfilename&gt</code>
	</p>
	<p>
	For example...
	</p>
	<p>
	<pre class="code">
	johnodoe@johndoe-laptop:~/Documents/myrepo$ echo \" This is the second sentence.\" >> first_file
	johnodoe@johndoe-laptop:~/Documents/myrepo$ svn commit -m \" After adding a sentence to first_file - Johndoe\"
	Sending        first_file
	Transmitting file data .
	Committed revision 2.
	johnodoe@johndoe-laptop:~/$ svn diff -r 1:2 first_file
	Index: first_file
	===================================================================
	--- first_file	(revision 1)
	+++ first_file	(revision 2)
	@@ -1 +1,2 @@
	 This is my first file
	+This is the second sentence
	johnodoe@johndoe-laptop:~/Documents/myrepo$ 
	</pre>
	</p>
	<h3>
	Revert
	</h3>
	<p>	
	In case you are working on the content and after a while you feel what you've done is incorrect and want to restore/revert it to the earlier state, <code>svn revert</code> should be used.
	</p>
	<p>
	For example..
</p><p>
	<pre class="code">
	johndoe@johndoe-laptop:~/Documents/myrepo$ cat first_file
	This is my first file
	This is the second sentence
	johndoe@johndoe-laptop:~/Documents/myrepo$ echo This is the third sentence >> first_file
	johndoe@johndoe-laptop:~/Documents/myrepo$ cat first_file
	This is my first file
	This is the second sentence
	This is the third sentence
	johndoe@johndoe-laptop:~/Documents/myrepo$ svn revert first_file
	Reverted 'first_file'
	johndoe@johndoe-laptop:~/Documents/myrepo$ cat first_file
	This is my first file
	This is the second sentence

	</pre>
</p>
<h3>
Conflicts
</h3><p>
	If more than one person works on the content of the repository, there are chances that two people working on the same content, edit it, try to commit it which results in a conflict.
</p><p>
	For example, consider two users who are editing the same document called Makefile. The repository is currently at  revision 5. Revision 5 of that file contains a single line: ‘#This is a makefile’. Now both of them check out revision 5 and edit that file. 
	The first user changes the line to ‘#This is a makefile for copying all files to installation directory’ and commits it back to the repository, which is bumped to revision 6.
</p><p>
	Let us assume that the other is not aware of this new revision being created. Say, he changed the makefile to: ‘#This is a makefile for copying all files to installation folder’. When this user commits the changes, you’ll get an error message, saying that the file is 'Out of date'!
</p><p>
	If the second user perform an <code>ls</code>, he'll find four files related to the conflict.
</p><p>

		Makefile – the original with markers
		Makefile.mine – version of the second user
		Makefile.r5 – the original the second user has worked with
		Makefile.r6 – the most update version from the first user.
</p><h3>
	Solving a conflict:
</h3><p>
		The second user has 2 options:<br>

		1. He can scrap the changes made by him and go with the the first user.
			
			All he has to do is reverting the changes he made and updating the working copy. 
		<pre class="code">
				$ svn revert Makefile
				Reverted 'Makefile'
				$ svn update Makefile
				At revision 6.
		</pre>
</p><p>
		2. Keeping his changes and scrapping the changes made by the first user.

			The user should copy his version over the original and tell Subversion he has resolved the conflict.
		<pre class="code">
				$ cp Makefile.mine README
				$ svn resolved Makefile
				Resolved conflicted state of 'Makefile'			
		</pre>
</p>


        </div>
      </section>

      <section id="experiment-article-section-4">

        <div id="experiment-article-section-4-icon" 
        class="icon">
	  <!-- Enclose the icon image of your lab.-->
	  <img src="../images/simulation.jpg" />
	  </div>

	  <div id="experiment-article-section-4-heading" 
	  class="heading">
	  Experiment
	  </div>

	  <div id="experiment-article-section-4-content" 
	  class="content">
	  <p>
	  <div id="login">
 <br />If you already have Virtual Labs login
	  credentials, please click 
<A HREF="javascript:void(0)"
onclick="window.open('interaction-frame.html',
'welcome','width=screen.availWidth,height=screen.availHeight,status=yes')">
here</A>.<br />
In case you do not have login credentials, please click here.
	  </div>

	  <div id="signup">

	  <div id="signup-warning"></div>

	  <form action="javascript:signupattempt(document.getElementById('signupform'));" id="signupform">

	  <table><tr>

	  <td>Your name</td><td> <input type="text" name="yourname" value="" id="yourname"/></td></tr>

	  <td>Preferred username</td><td> <input type="text" name="preferredusername" value="" id="preferredusername"/></td></tr>

	  <tr><td>Password</td> <td><input type="password" name="preferredpassword" id="preferredpassword"/></td></tr>

	  <tr><td>Re-enter Password</td> <td><input type="password" name="repreferredpassword" id="repreferredpassword"/></td></tr>

	  <tr><td>Email</td> <td><input type="text" name="email" id="email"/></td></tr>

	  <tr><td>Re-enter Email</td> <td><input type="text" name="reemail" id="reemail"/></td></tr>

	  <tr></tr>

	  <tr><td colspan=2>Enter the black characters present in the below image</td></tr>

	  <tr><td><img src="php/captcha.php" id="captchaimg"/></td><td><input type="text" name="captcha" id="captcha"/></td></tr>

	  <tr><td></td><td><input type="submit" value="Sign up" /></td></tr>

	  </table>

	  </form>

	  </div>

	  <div id="logout">

	  <a href="#" onclick="logout();">Logout</a>
	  </div>

	  <pre id="terminal" class="code"><div id="input" class="inpcls"><form name='f' class='cmdform' action='' onsubmit="return false;" id="cmdformid"><table class="inputtable" id="inputtableid"><tr><td><div id='prompt' class='less'>user@pascal:~/$</div></td><td class="inputtd"><input id='inputfield' name='q' type='text' class='cmdline' autocomplete="off" value="" onkeypress="showHint(event,this.value)" /></td></tr></table></form><div id="output" class="outcls"></div></div></pre>

<pre class="instr" id="instr">

<div id="instruction" title="0">

Now that we have learnt version control using subversion, we have an exercise for you.

The shell above supports few basic shell commands. Play along to get some hands-on experience of the interface.

When you are ready to perform the exercise, which is a set of 5 tasks, enter the command "start".

</div>

try: start,next,prev,clear,logout.

</pre>




          </p>
        </div>

      </section>

        <section id="experiment-article-section-6">
      
          <div id="experiment-article-section-6-icon" 
          class="icon">
	    <img src="../images/quizzes.jpg" />
	  </div>

          <div id="experiment-article-section-6-heading" 
          class="heading">
            Quiz
          </div>

          <div id="experiment-article-section-6-content" 
          class="content">
<ol>
  <li>How do you change the log message for a revision after it has been committed?</li>
<li>How do you rename a file under SVN version control?</li>
<li>How do you check the difference between the latest copy in the
  server against your working copy?</li>
<li>Suppose you're trying to commit a change to the server. However,
  as soon as you try to do it, Subversion says that the working copy
  is locked. How should you resolve the problem?</li>
</ol>
          </div>

        </section>

        <section id="experiment-article-section-8">
   
          <div id="experiment-article-section-8-icon" 
          class="icon">
	    <!-- Enclose the icon image of your lab.-->
	    <img src="../images/readings.jpg" />
	  </div>

          <div id="experiment-article-section-8-heading" 
          class="heading">
            Further Readings
          </div>

          <div id="experiment-article-section-8-content" 
          class="content">


	<ul>
	<li><a href="http://www.cs.ubc.ca/~vailen/svn_howto.htm">http://www.cs.ubc.ca/~vailen/svn_howto.htm</a></li>
	<li><a href="http://artis.imag.fr/~Xavier.Decoret/resources/svn/index.html">http://artis.imag.fr/~Xavier.Decoret/resources/svn/index.html</a></li>
	<li><a href="http://software-carpentry.org/version.html">http://software-carpentry.org/version.html</a> </li>
	<li><a href="http://ariejan.net/2007/07/04/how-to-resolve-subversion-conflicts/">http://ariejan.net/2007/07/04/how-to-resolve-subversion-conflicts/</a></li>
</ul>
          </div>

        </section>

   <section id="experiment-article-section-9">

          <div id="experiment-article-section-9-icon" 
          class="icon">
            <!-- Enclose the icon image of your lab.-->
            <img src="../images/readings.jpg" />
          </div>

          <div id="experiment-article-section-9-heading" 
          class="heading">
      
        Feedback
          </div>

          <div id="experiment-article-section-9-content" 
          class="content">
        Please provide us feedback <a href="http://virtual-labs.ac.in/feedback/">here</a>
          </div>

        </section>



      </div>


    <!-- An article can have a sidebar that contain related 
    links and additional material (however it is kept optional 
    at this moment) -->
    <aside id="lab-article-sidebar" class="default">
      <!-- put the content that you want to appear in the 
      sidebar -->	
    </aside>


    <!-- Article footer can display related content and 
    additional links -->						
    <footer id="lab-article-footer" class="default">
      <!-- Put the content that you want to appear here -->
    </footer>

  </article>


  <!-- Links to other labs, about us page can be kept the lab 
  footer-->
   <footer id="lab-footer" class="footer">
    <!-- Put the content here-->
	<a href="http://virtual-labs.ac.in/nmeict/" >Sponsered by MHRD (NME-ICT) </a> | <a href="http://virtual-labs.ac.in/licensing/" target="_blank"> Licensing Terms </a>
  </footer>

</div>		

</body>
</html>
